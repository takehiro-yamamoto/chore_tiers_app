<div class="user-chart-card">
  <h3 class="user-chart-title">ユーザー別完了状況</h3>
  <% if @user_completion_stats.present? %> 
    <% @user_completion_stats.each do |user, stats| %>
      <div class="user-chart-row">
        <div class="user-info">
          <%= image_tag(user.avatar_url.presence || 'avatar_placeholder.png', class: 'user-avatar') %>
          <p class="user-name"><%= user.name %></p>
        </div>
        <div class="user-progress">
          <div class="progress-info">
            <span class="progress-label">完了: <%= stats[:completed] %> / <%= stats[:total] %></span>
            <span class="progress-percent"><%= stats[:percent] %>%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar" style="width: <%= stats[:percent] %>%"></div>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <p class="no-data-msg">ユーザーの完了データがありません</p> 
  <% end %>
</div>